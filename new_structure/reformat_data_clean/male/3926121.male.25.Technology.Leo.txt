testing java classes main function e meant run command line bit tricky main functions print standard err streams call system exit something goes wrong order test correct functionality method conditionals test method going read output streams prevent system exit ending test solutions given generalized main functions work code system system err system exit calls hopefully code mostly self explanitory output streams captured calling system setout system seterr methods output streams stored bytearrayoutputstreams easily converted strings using tostring method usually test expecting expecting error output know exact error output expected even phrase keyword tested also system exit handled setting restrictive security policy done using java security policy file think verbose manipulatable set jvm securitymanager class create anonymous inner class overwrites checkexit function throws securityexception every case also reset jvm securitymanager back original one test done prevent unintentional side effects test method public class mainfunctiontest extends testcase bytearrayoutputstream bytearrayoutputstream err sets fixture creating system system err redirects method called test executed protected void setup throws exception super setup new bytearrayoutputstream system setout new printstream err new bytearrayoutputstream system seterr new printstream err public void testout string args new string arg1 jbench main args expect nothing error stream something output stream asserttrue err tostring length asserttrue tostring length public void testnoargs securitymanager cursecuritymanager system getsecuritymanager system setsecuritymanager new java lang securitymanager public void checkexit int code throw new securityexception try jbench main new string fail catch securityexception ex expected finally system setsecuritymanager cursecuritymanager take code good example unittest class left lot good practices sake brevity quick update jbench project dead years contacted original developer currently working net stuff updating jbench working refactoring adding bunch new features htmlreport feature really cool creates html page benchmark information stats charts generated jfreechart longer update finished